<button class="clear" #menuTrigger="matMenuTrigger" mat-icon-button [matMenuTriggerFor]="menu">
  <mat-icon>more_vert</mat-icon>
</button>


<mat-menu #menu="matMenu" [overlapTrigger]="false">
  <button mat-menu-item color="primary" [matMenuTriggerFor]="convertMenu">
    <mat-icon>save</mat-icon>
    <span>Save Data</span>
  </button>
  <button mat-menu-item color="primary" [matMenuTriggerFor]="columnMenu">
    <mat-icon>view_column</mat-icon>
    <span>Columns Setting</span>
  </button>
  <button mat-menu-item (click)="saveSetting_OnClick()">
    <mat-icon>grading</mat-icon>
    <span>Save Table Setting</span>
  </button>
  <button mat-menu-item (click)="clearFilter_OnClick()">
    <mat-icon style="margin-top: -3px">clear</mat-icon>
    <span>Clear filters</span>
  </button>
</mat-menu>

<!-- Convert Sub Menu -->

<mat-menu #convertMenu="matMenu">
  <button mat-menu-item (click)="download_OnClick('JSON')" >Json File</button>
  <button mat-menu-item (click)="download_OnClick('CSV')">CSV File</button>
  <button mat-menu-item (click)="print_OnClick(menuTrigger)">Print Table</button>
</mat-menu>

<!-- Column Setting Sub Menu -->

<mat-menu #columnMenu="matMenu">
  <ng-container *ngIf="columnInfo.length > 0 else noColumns">
    <div class="va-mat-table-dragable-container" cdkDropList dkDropListLockAxis="y" cdkDropListOrientation="vertical">
      <div *ngFor="let column of columnInfo; let i = index" (click)="$event.stopPropagation(); $event.preventDefault();"
        class="dragable-row" cdkDrag [cdkDragData]="{columnIndex: i, columnTitle: column.header}"
        (cdkDragDropped)="columnMenuDropped($event)">
        <mat-icon cdkDragHandle>drag_indicator</mat-icon>
        <mat-checkbox [disabled]="column.preventHidden" [checked]="!column.hidden"
          (click)="$event.stopPropagation();" (change)="toggleSelectedColumn(column.index)">
          {{ column.header }}
        </mat-checkbox>

        <div class="va-mat-table-drag-preview" *cdkDragPreview>
          <mat-icon>drag_indicator</mat-icon>
          <mat-checkbox [checked]="!column.hidden">
            {{ column.header }}
          </mat-checkbox>
        </div>
      </div>
    </div>
    <mat-radio-group [(ngModel)]="tableSetting.filterMode">
      <mat-radio-button value='client-side' (click)="$event.stopPropagation()">Filtering on Local</mat-radio-button>
      <mat-radio-button value='server-side' (click)="$event.stopPropagation()">Filtering on Server</mat-radio-button>
    </mat-radio-group>
    <mat-radio-group [(ngModel)]="tableSetting.sortMode">
      <mat-radio-button value='client-side' (click)="$event.stopPropagation()">Sort on Local</mat-radio-button>
      <mat-radio-button value='server-side' (click)="$event.stopPropagation()">Sort on Server</mat-radio-button>
    </mat-radio-group>
    <div style="border-top: solid 1px #e7e7e7;">
      <button mat-menu-item color="primary" (click)="apply_OnClick($event)" class="column-setting">
        <mat-icon color="primary">done</mat-icon>
      </button>
      <button mat-menu-item color="primary" class="column-setting">
        <mat-icon color="primary">clear</mat-icon>
      </button>
    </div>
  </ng-container>

  <ng-template #noColumns>
    <div mat-menu-item>
      No Columns
    </div>
  </ng-template>
</mat-menu>




