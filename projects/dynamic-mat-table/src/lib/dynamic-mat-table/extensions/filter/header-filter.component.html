<ng-content></ng-content>

<mat-menu filter-event #filterMenu="matMenu" class="menu" >
  <ng-template matMenuContent>

  <div filter-event class="menu-title">
    {{field?.header}}
  </div>
  <div [@listAnimation]="filterList.length" filter-event *ngFor="let filter of filterList; let index = index" class="filter-panel">

    <div >
      <mat-form-field>
        <mat-select [value]="filter.selectedIndex" [panelClass]="'mat-elevation-z10'" (selectionChange)="filter.selectedIndex = $event.value;" placeholder='Conditions'>
          <mat-option *ngFor="let op of filter.getOperations(); let selectedIndex=index" [value]="selectedIndex">
            {{ op.text }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngFor="let ctrl of filter?.parameters">
      <mat-form-field class="input-field">
        <mat-label>{{ctrl.text}}</mat-label>
        <input matInput #filterInput="matInput" [(ngModel)]="ctrl.value" [placeholder]=""/>
      </mat-form-field>
    </div>

    <div  class="or-and">
      <span *ngIf="filterList?.length !== index+1" class="selected-filter-type">{{ filter?.type === 'and' ? language.Filter.And : language.Filter.Or}}</span>
      <span class="svg">
        <mat-icon (click)="filterAction_OnClick(index,0)">add</mat-icon>
      </span>
      <span class="svg">
        <mat-icon (click)="filterAction_OnClick(index,1)" style="transform: rotate(90deg);">drag_handle</mat-icon>
      </span>
      <span class="svg">
        <mat-icon (click)="filterAction_OnClick(index,2)">clear</mat-icon>
      </span>
    </div>

  </div>

  <div filter-event class="menu-action">
    <button mat-raised-button (click)="clearColumn_OnClick()" style="border-radius: 5px 0 0 5px;">{{(service.language | async).Filter.Clear}}</button>
    <button mat-raised-button color="primary" (click)="applyFilter_OnClick()" style="border-radius: 0 5px 5px 0;">{{(service.language | async).Filter.Search}}</button>
  </div>
</ng-template>
</mat-menu>

<span class="trigger" [matMenuTriggerFor]="filterMenu">
  <mat-icon>filter_list</mat-icon>
</span>
